<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CHaoyi&#39;s</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-02-06T14:19:00.795Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>CHaoyi&#39;s</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux批量查找复制</title>
    <link href="http://yoursite.com/2018/02/06/Linux-cp/"/>
    <id>http://yoursite.com/2018/02/06/Linux-cp/</id>
    <published>2018-02-06T14:00:48.000Z</published>
    <updated>2018-02-06T14:19:00.795Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux批量查找文件并复制"><a href="#Linux批量查找文件并复制" class="headerlink" title="Linux批量查找文件并复制"></a>Linux批量查找文件并复制</h2><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>要查找到一个目录下的所有txt文件并复制到其他地方<br><br>例如：<br><br>目录/a下：<br></p><p>/a 目录下面的内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/a/1.txt</div><div class="line">/a/2.txt</div><div class="line">/a/3.doc</div><div class="line">/a/4.xml</div><div class="line">/a/b/5.txt</div><div class="line">/a/c/6.txt</div><div class="line">...</div></pre></td></tr></table></figure></p><p>现在需要将所有的txt文件复制到/b目录下</p><p>目前有两种办法：</p><ul><li><p><strong>用find命令的选项-exec来执行相应的命令</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find /a –name *.txt -exec cp &#123;&#125; /b \;</div></pre></td></tr></table></figure><p> {}表示的是由find找到的内容</p><p>-exec 是find命令额外动作的开始； \;表示的是额外动作的结束。-exec和\;中间的部分就是额外动作执行的命令。</p></li><li><strong>利用管道(|) 和 xargs 命令</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find /a –name *.txt | xargs cp –t /b</div></pre></td></tr></table></figure></li></ul><p>xargs 读取find的结果作为cp的输入数据。<font color="#DC143C">这里需要注意的是cp命令一定要加-t选项。</font>因为-t选项后面跟着的目录是目标目录。如果不加-t的话-b会被认为是源目录，而xargs读入的文件成了目标目录。这样是会报错误的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux批量查找文件并复制&quot;&gt;&lt;a href=&quot;#Linux批量查找文件并复制&quot; class=&quot;headerlink&quot; title=&quot;Linux批量查找文件并复制&quot;&gt;&lt;/a&gt;Linux批量查找文件并复制&lt;/h2&gt;&lt;h3 id=&quot;场景&quot;&gt;&lt;a href=&quot;#场景&quot;
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>screen命令</title>
    <link href="http://yoursite.com/2017/11/28/screen/"/>
    <id>http://yoursite.com/2017/11/28/screen/</id>
    <published>2017-11-28T03:54:32.000Z</published>
    <updated>2017-11-28T07:48:34.959Z</updated>
    
    <content type="html"><![CDATA[<h2 id="screen命令"><a href="#screen命令" class="headerlink" title="screen命令"></a>screen命令</h2><p>在执行一些长时间任务的时候由于ssh断连会导致任务断掉，所以需要后台运行，nohup或者screen，但screen更强大一下。</p><h3 id="创建一个session"><a href="#创建一个session" class="headerlink" title="创建一个session"></a>创建一个session</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -S name</div></pre></td></tr></table></figure><p>其中-S参数表示为session指定一个名称，这样在查询的时候更容易知道应该连接到哪个session</p><h3 id="从一个创建的session中退出"><a href="#从一个创建的session中退出" class="headerlink" title="从一个创建的session中退出"></a>从一个创建的session中退出</h3><p>同时按下ctrl a两个键，松开后按下d</p><h3 id="如何查询当前有多少个session"><a href="#如何查询当前有多少个session" class="headerlink" title="如何查询当前有多少个session:"></a>如何查询当前有多少个session:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -ls</div></pre></td></tr></table></figure><h3 id="如何进入一个已经创建的session"><a href="#如何进入一个已经创建的session" class="headerlink" title="如何进入一个已经创建的session:"></a>如何进入一个已经创建的session:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -r pid</div></pre></td></tr></table></figure><h3 id="如何销毁一个session"><a href="#如何销毁一个session" class="headerlink" title="如何销毁一个session:"></a>如何销毁一个session:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kill pid</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;screen命令&quot;&gt;&lt;a href=&quot;#screen命令&quot; class=&quot;headerlink&quot; title=&quot;screen命令&quot;&gt;&lt;/a&gt;screen命令&lt;/h2&gt;&lt;p&gt;在执行一些长时间任务的时候由于ssh断连会导致任务断掉，所以需要后台运行，nohup或者sc
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>python自定义异常</title>
    <link href="http://yoursite.com/2017/11/21/pyhton-except/"/>
    <id>http://yoursite.com/2017/11/21/pyhton-except/</id>
    <published>2017-11-21T08:19:24.000Z</published>
    <updated>2017-11-21T08:42:50.152Z</updated>
    
    <content type="html"><![CDATA[<p>在写ssh类的时候遇到一个问题就是无论命令执行功与否程序都都会一直执行下去，造成很多错误。试着用自定义异常解决了这个问题。</p><h2 id="try"><a href="#try" class="headerlink" title="try"></a>try</h2><p>异常在try块里抛，如果会产生多个异常，捕捉第一个，匹配except，后边的不再捕捉</p><h2 id="except"><a href="#except" class="headerlink" title="except"></a>except</h2><p>抓异常</p><h2 id="else"><a href="#else" class="headerlink" title="else"></a>else</h2><p>try无异常，才会执行else</p><h2 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h2><p>无论try块是否抛异常，永远执行的代码，通常用来执行关闭文件，断开服务器连接的功能</p><h2 id="写一个自己的异常类"><a href="#写一个自己的异常类" class="headerlink" title="写一个自己的异常类"></a>写一个自己的异常类</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Error</span><span class="params">(Exception)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"error"</span></div></pre></td></tr></table></figure><h2 id="在执行语句前应用"><a href="#在执行语句前应用" class="headerlink" title="在执行语句前应用"></a>在执行语句前应用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    self.chan.send(source_passwd+<span class="string">'\n'</span>)</div><div class="line">    sleep(<span class="number">1</span>)</div><div class="line">    rets=self.chan.recv(<span class="number">65535</span>)</div><div class="line">    <span class="keyword">print</span> rets</div><div class="line">    <span class="keyword">if</span> <span class="string">'scp:'</span> <span class="keyword">in</span> rets:</div><div class="line">        <span class="keyword">raise</span> Error</div><div class="line"><span class="keyword">except</span> Exception:</div><div class="line">    <span class="keyword">print</span> <span class="string">'error'</span></div><div class="line">    <span class="keyword">print</span> rets</div><div class="line">    exit(<span class="number">1</span>)</div><div class="line"><span class="keyword">finally</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'end'</span></div></pre></td></tr></table></figure><p>在返回rets中若找到scp:则抛出一个自定义异常，except用来接收异常并打印异常返回,不管有没有异常都会执行finally</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在写ssh类的时候遇到一个问题就是无论命令执行功与否程序都都会一直执行下去，造成很多错误。试着用自定义异常解决了这个问题。&lt;/p&gt;
&lt;h2 id=&quot;try&quot;&gt;&lt;a href=&quot;#try&quot; class=&quot;headerlink&quot; title=&quot;try&quot;&gt;&lt;/a&gt;try&lt;/h2&gt;
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>redhat7 配置使用centos的yum源</title>
    <link href="http://yoursite.com/2017/11/20/linux-yum/"/>
    <id>http://yoursite.com/2017/11/20/linux-yum/</id>
    <published>2017-11-20T09:28:30.000Z</published>
    <updated>2017-12-05T02:12:10.024Z</updated>
    
    <content type="html"><![CDATA[<h1 id="redhat7-配置使用centos的yum源"><a href="#redhat7-配置使用centos的yum源" class="headerlink" title="redhat7 配置使用centos的yum源"></a>redhat7 配置使用centos的yum源</h1><h2 id="检查是否安装yum包"><a href="#检查是否安装yum包" class="headerlink" title="检查是否安装yum包"></a>检查是否安装yum包</h2><p>查看RHEL是否安装了yum，若是安装了，那么又有哪些yum包</p><p>rpm -qa |grep yum</p><h2 id="删除redhat自带的yum包"><a href="#删除redhat自带的yum包" class="headerlink" title="删除redhat自带的yum包"></a>删除redhat自带的yum包</h2><p>rpm -qa|grep yum|xargs rpm -e –nodeps（不检查依赖，直接删除rpm包）</p><p>rpm -qa |grep yum</p><p>查看，无信息显示表示已经卸载完成。</p><h2 id="下载新的yum包。使用Centos7的yum包-或者上传rpm包"><a href="#下载新的yum包。使用Centos7的yum包-或者上传rpm包" class="headerlink" title="下载新的yum包。使用Centos7的yum包(或者上传rpm包)"></a>下载新的yum包。使用Centos7的yum包(或者上传rpm包)</h2><p>wget <a href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm" target="_blank" rel="external">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm</a></p><p>wget <a href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-150.el7.centos.noarch.rpm" target="_blank" rel="external">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-150.el7.centos.noarch.rpm</a></p><p>wget <a href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-40.el7.noarch.rpm" target="_blank" rel="external">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-40.el7.noarch.rpm</a></p><p>wget <a href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-40.el7.noarch.rpm" target="_blank" rel="external">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-40.el7.noarch.rpm</a></p><p>wget <a href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-urlgrabber-3.10-8.el7.noarch.rpm" target="_blank" rel="external">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-urlgrabber-3.10-8.el7.noarch.rpm</a>     ( rpm -qa|grep python-urlgrabber|xargs rpm -e –nodeps )</p><p>安装yum软件包</p><p>注意:单个的安装包可能会依赖其它包（例如yum和yum-fastestmirror会相互依赖），所以我们可以把所有这些包放在一起，用一行命令将它们同时安装即可：</p><p>rpm -ivh python-urlgrabber-3.10-8.el7.noarch.rpm</p><p>rpm -ivh yum-metadata-parser-1.1.4-10.el7.x86_64.rpm yum-3.4.3-150.el7.centos.noarch.rpm yum-plugin-fastestmirror-1.1.31-40.el7.noarch.rpm</p><h2 id="更换yum源。使用阿里云的源"><a href="#更换yum源。使用阿里云的源" class="headerlink" title="更换yum源。使用阿里云的源"></a>更换yum源。使用阿里云的源</h2><p>下载新的CentOS-Base.repo 到/etc/yum.repos.d/</p><p>CentOS 5<br>wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-5.repo" target="_blank" rel="external">http://mirrors.aliyun.com/repo/Centos-5.repo</a></p><p>CentOS 6<br>wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-6.repo" target="_blank" rel="external">http://mirrors.aliyun.com/repo/Centos-6.repo</a><br>CentOS 7<br>wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-7.repo" target="_blank" rel="external">http://mirrors.aliyun.com/repo/Centos-7.repo</a><br>更改CentOS-Media.repo使其为不生效：<br>enabled=0<br>第三步:修改CentOS-Base.repo文件中的$releasever全部替换为版本号7.</p><h2 id="运行yum-makecache生成缓存"><a href="#运行yum-makecache生成缓存" class="headerlink" title="运行yum makecache生成缓存"></a>运行yum makecache生成缓存</h2><p>yum clean all<br>yum makecache<br>yum update</p><h1 id="其他办法-redhat7"><a href="#其他办法-redhat7" class="headerlink" title="其他办法(redhat7)"></a>其他办法(redhat7)</h1><p>安装epel-release-latest-7.noarch.rpm</p><p>添加rhel-debuginfo.repo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[base]</div><div class="line">name=CentOS-$releasever - Base</div><div class="line">baseurl=http://mirrors.163.com/centos/7/os/$basearch/</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=http://mirrors.163.com/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7</div><div class="line"></div><div class="line"></div><div class="line">#released updates</div><div class="line">[updates]</div><div class="line">name=CentOS-$releasever - Updates</div><div class="line">baseurl=http://mirrors.163.com/centos/7/updates/$basearch/</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=http://mirrors.163.com/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7</div><div class="line"></div><div class="line"></div><div class="line">[extras]</div><div class="line">name=CentOS-$releasever - Extras</div><div class="line">baseurl=http://mirrors.163.com/centos/7/extras//$basearch/</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=http://mirrors.163.com/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7</div><div class="line"></div><div class="line">[centosplus]</div><div class="line">name=CentOS-$releasever - Plus</div><div class="line">baseurl=http://mirrors.163.com/centos/7/centosplus//$basearch/</div><div class="line">gpgcheck=1</div><div class="line">enabled=0</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;redhat7-配置使用centos的yum源&quot;&gt;&lt;a href=&quot;#redhat7-配置使用centos的yum源&quot; class=&quot;headerlink&quot; title=&quot;redhat7 配置使用centos的yum源&quot;&gt;&lt;/a&gt;redhat7 配置使用cento
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>函数可变参数处理</title>
    <link href="http://yoursite.com/2017/11/20/pyhton-params/"/>
    <id>http://yoursite.com/2017/11/20/pyhton-params/</id>
    <published>2017-11-20T06:15:44.000Z</published>
    <updated>2017-11-20T08:36:44.188Z</updated>
    
    <content type="html"><![CDATA[<p>Python参数收集的机制使用星号“*”实现，这里即在指定的参数params前面加上一个“*”，“*”的意思就是用params参数收集传入是不定个数的参数，<br>并将收集的到参数以元组的方式存储在params中</p><ul><li>Python中在定义函数的时候为不定个数的参数的函数提供的参数收集的机制<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_params</span><span class="params">(*params)</span>:</span>  </div><div class="line">   <span class="keyword">print</span> params</div></pre></td></tr></table></figure></li></ul><p>func_params(1)<br>(1,)<br>func_params(1, 2, 3)<br>(1, 2, 3)<br> func_params()<br>()  </p><ul><li>当然也可以可变参数前面还有普通参数<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_params1</span><span class="params">(param1, *params)</span>:</span>  </div><div class="line">   <span class="keyword">print</span> param1  </div><div class="line">   <span class="keyword">print</span> params</div></pre></td></tr></table></figure></li></ul><p>>&gt;&gt; func_params1(1)<br>1<br>()<br>>&gt;&gt; func_params1(1, 2)<br>1<br>(2,)<br>>&gt;&gt; func_params1(1, 2, 3, 4)<br>1<br>(2, 3, 4)<br>>&gt;&gt; func_params1(1,2,3,[“q”],”ww”,”eqwe”)<br>1<br>(2, 3, [‘q’], ‘ww’, ‘eqwe’)  </p><p><strong>需要注意的是不定参数后面不能再有普通参数：</strong></p><ul><li><strong>上面是函数不能处理关键字参数，如：</strong></li></ul><p>func_params1(1, params=1)<br>Traceback (most recent call last):<br>  File “<pyshell#16>“, line 1, in <module><br>    func_params1(1, params=1)<br>TypeError: func_params1() got an unexpected keyword argument ‘params’</module></pyshell#16></p><ul><li>关键字参数的处理可以使用“**”来实现：<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_keys</span><span class="params">(**keys)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> keys  </div><div class="line">```  </div><div class="line">\&gt;&gt;&gt; func_keys()  </div><div class="line">&#123;&#125;  </div><div class="line">\&gt;&gt;&gt; func_keys(p1=<span class="number">1</span>)  </div><div class="line">&#123;<span class="string">'p1'</span>: <span class="number">1</span>&#125;  </div><div class="line">\&gt;&gt;&gt; func_keys(p1=<span class="number">1</span>, p2=<span class="number">2</span>,p3=<span class="string">'3'</span>)  </div><div class="line">&#123;<span class="string">'p2'</span>: <span class="number">2</span>, <span class="string">'p3'</span>: <span class="string">'3'</span>, <span class="string">'p1'</span>: <span class="number">1</span>&#125;</div><div class="line">上面再参数keys前面加上“\**”，表明参数keys将接收关键字参数，并将关键字和值分别作为键-值对存储在字典中；</div><div class="line">上面这种函数定义方式的时候，参数要么为空，要么为一个关键字参数：</div><div class="line"></div><div class="line">**同样关键字参数后面不能有普通参数**</div><div class="line"></div><div class="line">* 关键字参数可以和可变参数结合使用：</div><div class="line">```python</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_keys3</span><span class="params">(*params, **keys)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> params  </div><div class="line">    <span class="keyword">print</span> keys</div></pre></td></tr></table></figure></li></ul><p>>&gt;&gt; func_keys3()<br>()<br>{}<br>>&gt;&gt; func_keys3(1,2,3)<br>(1, 2, 3)<br>{}<br>>&gt;&gt; func_keys3(1,2,k1=1,k2=2)<br>(1, 2)<br>{‘k2’: 2, ‘k1’: 1}<br><strong>注意函数定义时，可变参数要在关键字参数的前面</strong></p><ul><li>普通参数、可变参数和关键字参数可以结合使用：<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_misc</span><span class="params">(p1, p2, p3, *params, **keys)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> p1, p2, p3  </div><div class="line">    <span class="keyword">print</span> params  </div><div class="line">    <span class="keyword">print</span> keys</div></pre></td></tr></table></figure></li></ul><p>>&gt;&gt; func_misc(1, 2, 3)<br>1 2 3<br>()<br>{}<br>>&gt;&gt; func_misc(1, 2, 3, 4, 5, 6)<br>1 2 3<br>(4, 5, 6)<br>{}<br>>&gt;&gt; func_misc(1, 2, 3, 4, k1=1, k2=2)<br>1 2 3<br>(4,)<br>{‘k2’: 2, ‘k1’: 1}<br>>&gt;&gt; func_misc(1, 2, 3, k1=1, k2=2)<br>1 2 3<br>()<br>{‘k2’: 2, ‘k1’: 1}  </p><h2 id="参数收集的反转过程"><a href="#参数收集的反转过程" class="headerlink" title="参数收集的反转过程"></a>参数收集的反转过程</h2><p>在参数收集中可以使用“*”和“*<em>”分别将参数收集为元组和字典，同样可以实现其反转过程，可以使用“\</em>”和“**”执行相反的操作；如：</p><ul><li>“*”反转操作：<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(p1, p2)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> p1  </div><div class="line">    <span class="keyword">print</span> p2</div></pre></td></tr></table></figure></li></ul><p>>&gt;&gt; t=(1,2)<br>>&gt;&gt; func(*t)<br>1<br>2  </p><ul><li>“**”反转操作：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">k=&#123;<span class="string">'p1'</span>:<span class="number">1</span>, <span class="string">'p2'</span>:<span class="number">2</span>, <span class="string">'p3'</span>:<span class="number">3</span>&#125;  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_k</span><span class="params">(p1, p2, p3)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> p1, p2, p3  </div><div class="line"></div><div class="line">func_k(**k)  </div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_k1</span><span class="params">(p1)</span>:</span>  </div><div class="line">    <span class="keyword">print</span> p1  </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_k2</span><span class="params">(p1,p2,p3,p4=<span class="number">1</span>)</span>:</span>  </div><div class="line">       <span class="keyword">print</span> p1,p2,p3  </div><div class="line">       <span class="keyword">print</span> p4  </div><div class="line"></div><div class="line">func_k2(**k)  </div><div class="line">   <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>  </div><div class="line">   <span class="number">1</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Python参数收集的机制使用星号“*”实现，这里即在指定的参数params前面加上一个“*”，“*”的意思就是用params参数收集传入是不定个数的参数，&lt;br&gt;并将收集的到参数以元组的方式存储在params中&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python中在定义函数的时候为不
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python_yield</title>
    <link href="http://yoursite.com/2017/11/16/python-yield/"/>
    <id>http://yoursite.com/2017/11/16/python-yield/</id>
    <published>2017-11-16T07:56:30.000Z</published>
    <updated>2017-11-16T08:31:56.035Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-yield-使用浅析"><a href="#Python-yield-使用浅析" class="headerlink" title="Python yield 使用浅析"></a>Python yield 使用浅析</h1><p>在学习看到一篇博客后深有体会作为转载学习<a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/" target="_blank" rel="external">地址</a></p><p>以生成生成斐波那契数列为例</p><ul><li>简单输出斐波那契數列前 N 个数<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(max)</span>:</span></div><div class="line">   n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></div><div class="line">   <span class="keyword">while</span> n &lt; max:</div><div class="line">       <span class="keyword">print</span> b</div><div class="line">       a, b = b, a + b</div><div class="line">       n = n + <span class="number">1</span></div></pre></td></tr></table></figure></li></ul><p>执行 fab(5)结果没问题，但直接在 fab 函数中用 print 打印数字会导致该函数可复用性较差，因为 fab 函数返回 None，其他函数无法获得该函数生成的数列</p><ul><li>输出斐波那契數列前 N 个数第二版，返回一个list<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(max)</span>:</span></div><div class="line">   n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></div><div class="line">   L = []</div><div class="line">   <span class="keyword">while</span> n &lt; max:</div><div class="line">       L.append(b)</div><div class="line">       a, b = b, a + b</div><div class="line">       n = n + <span class="number">1</span></div><div class="line">   <span class="keyword">return</span> L</div></pre></td></tr></table></figure></li></ul><p>可以使用如下方式打印出 fab 函数返回的 List<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> n <span class="keyword">in</span> fab(<span class="number">5</span>):</div><div class="line">    <span class="keyword">print</span> n</div></pre></td></tr></table></figure></p><p>改写后的 fab 函数通过返回 List 能满足复用性的要求，但是该函数在运行中占用的内存会随着参数 max 的增大而增大，如果要控制内存占用，最好不要用 List</p><ul><li>通过 iterable 对象来迭代<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>): <span class="keyword">pass</span></div></pre></td></tr></table></figure></li></ul><p>会导致生成一个 1000 个元素的 List，而代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000</span>): <span class="keyword">pass</span></div></pre></td></tr></table></figure></p><p>则不会生成一个 1000 个元素的 List，而是在每次迭代中返回下一个数值，内存空间占用很小。因为 xrange 不返回 List，而是返回一个 iterable 对象。<br>利用 iterable 我们可以把 fab 函数改写为一个支持 iterable 的 class，以下是第三个版本的 Fab：</p><ul><li>第三个版本<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fab</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, max)</span>:</span></div><div class="line">       self.max = max</div><div class="line">       self.n, self.a, self.b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">       <span class="keyword">return</span> self</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></div><div class="line">       <span class="keyword">if</span> self.n &lt; self.max:</div><div class="line">           r = self.b</div><div class="line">           self.a, self.b = self.b, self.a + self.b</div><div class="line">           self.n = self.n + <span class="number">1</span></div><div class="line">           <span class="keyword">return</span> r</div><div class="line">       <span class="keyword">raise</span> StopIteration()</div></pre></td></tr></table></figure></li></ul><p>Fab 类通过 next() 不断返回数列的下一个数，内存占用始终为常数</p><p>然而，使用 class 改写的这个版本，代码远远没有第一版的 fab 函数来得简洁。如果我们想要保持第一版 fab 函数的简洁性，同时又要获得 iterable 的效果，yield 就派上用场了：</p><ul><li>使用 yield 的第四版<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(max)</span>:</span></div><div class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> n &lt; max:</div><div class="line">        <span class="keyword">yield</span> b</div><div class="line">        <span class="comment"># print b</span></div><div class="line">        a, b = b, a + b</div><div class="line">        n = n + <span class="number">1</span></div></pre></td></tr></table></figure></li></ul><p>简单地讲，yield 的作用就是把一个函数变成一个 generator，带有 yield 的函数不再是一个普通函数，Python 解释器会将其视为一个 generator，调用 fab(5) 不会执行 fab 函数，而是返回一个 iterable 对象！在 for 循环执行时，每次循环都会执行 fab 函数内部的代码，执行到 yield b 时，fab 函数就返回一个迭代值，下次迭代时，代码从 yield b 的下一条语句继续执行，而函数的本地变量看起来和上次中断执行前是完全一样的，于是函数继续执行，直到再次遇到 yield。</p><h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><p>另一个 yield 的例子来源于文件读取。如果直接对文件对象调用 read() 方法，会导致不可预测的内存占用。好的方法是利用固定长度的缓冲区来不断读取文件内容。通过 yield，我们不再需要编写读文件的迭代类，就可以轻松实现文件读取：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_file</span><span class="params">(fpath)</span>:</span></div><div class="line">   BLOCK_SIZE = <span class="number">1024</span></div><div class="line">   <span class="keyword">with</span> open(fpath, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</div><div class="line">       <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">           block = f.read(BLOCK_SIZE)</div><div class="line">           <span class="keyword">if</span> block:</div><div class="line">               <span class="keyword">yield</span> block</div><div class="line">           <span class="keyword">else</span>:</div><div class="line">               <span class="keyword">return</span></div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-yield-使用浅析&quot;&gt;&lt;a href=&quot;#Python-yield-使用浅析&quot; class=&quot;headerlink&quot; title=&quot;Python yield 使用浅析&quot;&gt;&lt;/a&gt;Python yield 使用浅析&lt;/h1&gt;&lt;p&gt;在学习看到一篇博客后
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python_yield" scheme="http://yoursite.com/tags/python-yield/"/>
    
  </entry>
  
  <entry>
    <title>python_string</title>
    <link href="http://yoursite.com/2017/11/16/python-string/"/>
    <id>http://yoursite.com/2017/11/16/python-string/</id>
    <published>2017-11-16T06:32:40.000Z</published>
    <updated>2017-11-16T06:50:32.169Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python标准库—-string模块"><a href="#Python标准库—-string模块" class="headerlink" title="Python标准库— string模块"></a>Python标准库— string模块</h1><p>String模块包含大量实用常量和类，以及一些过时的遗留功能，并还可用作字符串操作。</p><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><table><thead><tr><th>常用方法</th><th>描述</th></tr></thead><tbody><tr><td>str.capitalize()</td><td>把字符串的首字母大写  </td></tr><tr><td>str.center(width)</td><td>将原字符串用空格填充成一个长度为width的字符串，原字符串内容居中</td></tr><tr><td>str.count(s)</td><td>返回字符串s在str中出现的次数</td></tr><tr><td>str.decode(encoding=’UTF-8’,errors=’strict’)</td><td>以指定编码格式解码字符串</td></tr><tr><td>str.encode(encoding=’UTF-8’,errors=’strict’)</td><td>以指定编码格式编码字符串</td></tr><tr><td>str.endswith(s)</td><td>判断字符串str是否以字符串s结尾</td></tr><tr><td>str.find(s)</td><td>返回字符串s在字符串str中的位置索引，没有则返回-1</td></tr><tr><td>str.index(s)</td><td>和find()方法一样，但是如果s不存在于str中则会抛出异常</td></tr><tr><td>str.isalnum()</td><td>如果str至少有一个字符并且都是字母或数字则返回True,否则返回False</td></tr><tr><td>str.isalpha()</td><td>如果str至少有一个字符并且都是字母则返回True,否则返回False</td></tr><tr><td>str.isdigit()</td><td>如果str只包含数字则返回 True 否则返回 False</td></tr><tr><td>str.islower()</td><td>如果str存在区分大小写的字符，并且都是小写则返回True 否则返回False</td></tr><tr><td>str.isspace()</td><td>如果str中只包含空格，则返回 True，否则返回 False</td></tr><tr><td>str.istitle()</td><td>如果str是标题化的(单词首字母大写)则返回True，否则返回False</td></tr><tr><td>str.isupper()</td><td>如果str存在区分大小写的字符，并且都是大写则返回True 否则返回False</td></tr><tr><td>str.ljust(width)</td><td>返回一个原字符串左对齐的并使用空格填充至长度width的新字符串</td></tr><tr><td>str.lower()</td><td>转换str中所有大写字符为小写</td></tr><tr><td>str.lstrip()</td><td>去掉str左边的不可见字符</td></tr><tr><td>str.partition(s)</td><td>用s将str切分成三个值</td></tr><tr><td>str.replace(a, b)</td><td>将字符串str中的a替换成b</td></tr><tr><td>str.rfind(s)</td><td>类似于 find()函数，不过是从右边开始查找</td></tr><tr><td>str.rindex(s)</td><td>类似于 index()，不过是从右边开始</td></tr><tr><td>str.rjust(width)</td><td>返回一个原字符串右对齐的并使用空格填充至长度width的新字符串</td></tr><tr><td>str.rpartition(s)</td><td>类似于 partition()函数,不过是从右边开始查找</td></tr><tr><td>str.rstrip()</td><td>去掉str右边的不可见字符</td></tr><tr><td>str.split(s)</td><td>以s为分隔符切片str</td></tr><tr><td>str.splitlines()</td><td>按照行分隔，返回一个包含各行作为元素的列表</td></tr><tr><td>str.startswith(s)</td><td>检查字符串str是否是以s开头，是则返回True，否则返回False</td></tr><tr><td>str.strip()</td><td>等于同时执行rstrip()和lstrip()</td></tr><tr><td>str.title()</td><td>返回”标题化”的str,所有单词都是以大写开始，其余字母均为小写</td></tr><tr><td>str.upper()</td><td>返回str所有字符为大写的字符串</td></tr><tr><td>str.zfill(width)</td><td>返回长度为 width 的字符串，原字符串str右对齐，前面填充0</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python标准库—-string模块&quot;&gt;&lt;a href=&quot;#Python标准库—-string模块&quot; class=&quot;headerlink&quot; title=&quot;Python标准库— string模块&quot;&gt;&lt;/a&gt;Python标准库— string模块&lt;/h1&gt;&lt;p&gt;St
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>python爬取微博评论并存储到数据库（二）</title>
    <link href="http://yoursite.com/2017/11/14/weibo1/"/>
    <id>http://yoursite.com/2017/11/14/weibo1/</id>
    <published>2017-11-14T01:46:08.000Z</published>
    <updated>2017-11-14T02:26:49.273Z</updated>
    
    <content type="html"><![CDATA[<h2 id="从数据库中取出爬到的评论数据并处理"><a href="#从数据库中取出爬到的评论数据并处理" class="headerlink" title="从数据库中取出爬到的评论数据并处理"></a>从数据库中取出爬到的评论数据并处理</h2><h3 id="取数据"><a href="#取数据" class="headerlink" title="取数据"></a>取数据</h3><p>从数据库中读取数据,取出前13000条评论，将其转化为list以方便删除其中无用的数据，将处理后的数据分别存到不同的list中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">readmysql</span><span class="params">()</span>:</span></div><div class="line">    commentlist = []</div><div class="line">    textlist = []</div><div class="line">    userlist = []</div><div class="line">    conn = MySQLdb.connect(host=<span class="string">'127.0.0.1'</span>, user=<span class="string">'root'</span>, db=<span class="string">'scrpay'</span>, passwd=<span class="string">'123456'</span>, charset=<span class="string">'utf8'</span>)</div><div class="line">    <span class="keyword">with</span> conn:</div><div class="line">        cur = conn.cursor()</div><div class="line">        cur.execute(<span class="string">'SELECT * FROM weibo WHERE id &lt; %d'</span> % <span class="number">13000</span>)</div><div class="line">        rows = cur.fetchall()<span class="comment">#取出数据</span></div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> rows:</div><div class="line">            row = list(row)<span class="comment">#将tuple转换为list进而修改</span></div><div class="line">            <span class="keyword">del</span> row[<span class="number">0</span>]</div><div class="line">            <span class="keyword">if</span> row <span class="keyword">not</span> <span class="keyword">in</span> commentlist:</div><div class="line">                commentlist.append(row)</div><div class="line">                comment_id = row[<span class="number">0</span>]</div><div class="line">                user_name = row[<span class="number">1</span>]</div><div class="line">                userlist.append(user_name)</div><div class="line">                created_at = row[<span class="number">2</span>]</div><div class="line">                text = row[<span class="number">3</span>]</div><div class="line">                textlist.append(text)</div><div class="line">                likenum = row[<span class="number">4</span>]</div><div class="line">                source = row[<span class="number">5</span>]</div><div class="line">                <span class="comment">#print comment_id.encode('utf-8'),user_name.encode('utf-8'),created_at.encode('utf-8'),text.encode('utf-8'),likenum.encode('utf-8'),source.encode('utf-8')</span></div><div class="line">    <span class="keyword">return</span> commentlist, textlist, userlist</div></pre></td></tr></table></figure><h3 id="分析数据"><a href="#分析数据" class="headerlink" title="分析数据"></a>分析数据</h3><p>用云词显示出现词汇的频率<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">wordtocloud</span><span class="params">(textlist)</span>:</span></div><div class="line">    fulltext=<span class="string">''</span></div><div class="line">    cloud = WordCloud(font_path=<span class="string">'font.ttf'</span>,</div><div class="line">            background_color=<span class="string">"white"</span>,  <span class="comment"># 背景颜色</span></div><div class="line">            max_words=<span class="number">2000</span>,  <span class="comment"># 词云显示的最大词数</span></div><div class="line">            <span class="comment">#mask=back_coloring,  # 设置背景图片</span></div><div class="line">            max_font_size=<span class="number">100</span>,  <span class="comment"># 字体最大值</span></div><div class="line">            random_state=<span class="number">42</span>,</div><div class="line">            width=<span class="number">1000</span>, height=<span class="number">860</span>, margin=<span class="number">2</span>,<span class="comment"># 设置图片默认的大小,但是如果使用背景图片的话,那么保存的图片大小将会按照其大小保存,margin为词语边缘距离</span></div><div class="line">            )</div><div class="line">    <span class="comment">#将数据放到文本中，使用jieba分词分出所有词汇</span></div><div class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> textlist:</div><div class="line">        fulltext += <span class="string">' '</span>.join(jieba.cut(li,cut_all = <span class="keyword">False</span>))</div><div class="line">    wc = cloud.generate(fulltext)</div><div class="line">    <span class="comment">#image_colors = ImageColorGenerator(back_coloring)</span></div><div class="line">    plt.figure(<span class="string">"wordc"</span>)</div><div class="line">    plt.imshow(wc.recolor())</div><div class="line">    wc.to_file(<span class="string">'微博评论词云.png'</span>)</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;从数据库中取出爬到的评论数据并处理&quot;&gt;&lt;a href=&quot;#从数据库中取出爬到的评论数据并处理&quot; class=&quot;headerlink&quot; title=&quot;从数据库中取出爬到的评论数据并处理&quot;&gt;&lt;/a&gt;从数据库中取出爬到的评论数据并处理&lt;/h2&gt;&lt;h3 id=&quot;取数据&quot;&gt;
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>用python爬取微博评论并存储到数据库</title>
    <link href="http://yoursite.com/2017/11/13/weibo/"/>
    <id>http://yoursite.com/2017/11/13/weibo/</id>
    <published>2017-11-13T02:40:05.000Z</published>
    <updated>2017-11-13T03:05:08.831Z</updated>
    
    <content type="html"><![CDATA[<h2 id="python-对微博评论进行爬取"><a href="#python-对微博评论进行爬取" class="headerlink" title="python 对微博评论进行爬取"></a>python 对微博评论进行爬取</h2><h2 id="微博授权"><a href="#微博授权" class="headerlink" title="微博授权"></a>微博授权</h2><p>调用微博API进行登录，这是方法<a href="http://blog.csdn.net/gamer_gyt/article/details/51839159" target="_blank" rel="external">微博API登录授权</a></p><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="安装微博API"><a href="#安装微博API" class="headerlink" title="安装微博API"></a>安装微博API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install weibo</div></pre></td></tr></table></figure><h3 id="测试新建微博应用"><a href="#测试新建微博应用" class="headerlink" title="测试新建微博应用"></a>测试新建微博应用</h3><p>参考：<a href="http://blog.csdn.net/gamer_gyt/article/details/51839159" target="_blank" rel="external">微博API登录授权</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">App_key = <span class="string">'自己的'</span></div><div class="line">App_secret = <span class="string">'自己的'</span></div><div class="line">CALLBACK_URL = <span class="string">'https://api.weibo.com/oauth2/default.html'</span>  <span class="comment"># 回调链接</span></div><div class="line"></div><div class="line">client = APIClient(app_key=App_key, app_secret=App_secret, redirect_uri=CALLBACK_URL)</div><div class="line">url = client.get_authorize_url()</div><div class="line">webbrowser.open_new(url)</div></pre></td></tr></table></figure></p><p>微博授权，将返回一个code,在地址栏</p><p>输入code进行授权。此处可以自动化使用selenium进行自动点击获取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">code = raw_input()</div><div class="line">r = client.request_access_token(code)</div><div class="line">access_token = r.access_token  <span class="comment"># 新浪返回的token，类似abc123xyz456</span></div><div class="line">expires_in = r.expires_in</div><div class="line">client.set_access_token(access_token, expires_in)</div></pre></td></tr></table></figure><p>根据单条微博ID抓取返回，使用移动端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">weibo_id = (<span class="string">'4154417035431509'</span>)  <span class="comment"># 单条微博ID</span></div><div class="line">url = <span class="string">'https://m.weibo.cn/api/comments/show?id='</span> + weibo_id + <span class="string">'&amp;page=&#123;&#125;'</span></div></pre></td></tr></table></figure></p><p>伪装headers<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">headers = &#123;</div><div class="line">    <span class="string">'User-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36'</span>,</div><div class="line">    <span class="string">'Host'</span>: <span class="string">'m.weibo.cn'</span>,</div><div class="line">    <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*;q=0.01'</span>,</div><div class="line">    <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.8'</span>,</div><div class="line">    <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip, deflate, br'</span>,</div><div class="line">    <span class="string">'Referer'</span>: <span class="string">'https://m.weibo.cn/status/'</span> + weibo_id,</div><div class="line">    <span class="string">'Cookie'</span>: <span class="string">'ALF=1512569395; SCF=Am_oMeVmtKxusW2bqPM2Bq2tboM-dQhvoAfmoVm30hFM1YxnCOElOw4yQAduKN_s_57PdgmRBDzA-neEV88QH-U.; SUB=_2A253Bdc-DeRhGeNO6VMT8ybFwzuIHXVUCfl2rDV6PUJbktANLXPBkW1qA44VXJ9g04C0C9ZKqCcDhlEdcw..; SUBP=0033WrSXqPxfM725Ws9jqgMF55529P9D9Wh6Lb0JMxwuem5b4Kz02AcF5JpX5K-hUgL.Fo-7eo2Ee0n41hM2dJLoI7LhIs8awgLJ9g.t; SUHB=0YhhquN90t0cqa; SSOLoginState=1510057838; _T_WM=47eac210afab7501038eb13a03e0305b; H5:PWA:UID=1; __guid=52195957.3372748557967896000.1510057840112.0652; H5_INDEX=2; H5_INDEX_TITLE=Chaoyifei; M_WEIBOCN_PARAMS=featurecode%3D20000320%26oid%3D4160547165300149%26luicode%3D20000061%26lfid%3D4160547165300149; monitor_count=16'</span>,</div><div class="line">    <span class="string">'DNT'</span>: <span class="string">'1'</span>,</div><div class="line">    <span class="string">'Connection'</span>: <span class="string">'keep-alive'</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>登录并获取返回<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">r = requests.get(url=url.format(i), headers=headers)</div><div class="line">    comment_page = r.json()[<span class="string">'data'</span>]</div></pre></td></tr></table></figure></p><p>获取评论内容并过滤表情符号<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">user = comment_page[j]</div><div class="line">                comment_id = user[<span class="string">'user'</span>][<span class="string">'id'</span>]</div><div class="line">                <span class="comment"># print comment_id</span></div><div class="line">                user_name = user[<span class="string">'user'</span>][<span class="string">'screen_name'</span>]</div><div class="line">                <span class="comment"># print (user_name)</span></div><div class="line">                created_at = user[<span class="string">'created_at'</span>]</div><div class="line">                <span class="comment"># print created_at</span></div><div class="line">                <span class="comment"># 屏蔽表情符</span></div><div class="line"></div><div class="line">                text = re.sub(<span class="string">'&lt;.*?&gt;|回复&lt;.*?&gt;:|[\U00010000-\U0010ffff]|[\uD800-\uDBFF][\uDC00-\uDFFF]'</span>, <span class="string">''</span>, user[<span class="string">'text'</span>])</div><div class="line">                <span class="comment"># print text</span></div><div class="line">                likenum = user[<span class="string">'like_counts'</span>]</div><div class="line">                <span class="comment"># print likenum</span></div><div class="line">                source = re.sub(<span class="string">'[\U00010000-\U0010ffff]|[\uD800-\uDBFF][\uDC00-\uDFFF]'</span>, <span class="string">''</span>, user[<span class="string">'source'</span>])</div></pre></td></tr></table></figure></p><p>插入到数据库(数据库已经建表)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">source = re.sub(<span class="string">'[\U00010000-\U0010ffff]|[\uD800-\uDBFF][\uDC00-\uDFFF]'</span>, <span class="string">''</span>, user[<span class="string">'source'</span>])</div><div class="line">                <span class="comment"># print source+'\r\n'</span></div><div class="line">                conn = MySQLdb.connect(host=<span class="string">'127.0.0.1'</span>, user=<span class="string">'root'</span>, db=<span class="string">'scrpay'</span>, passwd=<span class="string">'123456'</span>, charset=<span class="string">'utf8'</span>)</div><div class="line">                cur = conn.cursor()</div><div class="line">                sql = <span class="string">"insert into weibo(comment_id,user_name,created_at,text,likenum,source) values(%s,%s,%s,%s,%s,%s)"</span></div><div class="line">                param = (comment_id, user_name, created_at, text, likenum, source)</div><div class="line">                <span class="keyword">try</span>:</div><div class="line">                    A = cur.execute(sql, param)</div><div class="line">                    conn.commit()</div><div class="line">                    <span class="keyword">print</span> <span class="string">'成功'</span></div><div class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">                    <span class="keyword">print</span> e</div><div class="line">                    <span class="keyword">print</span> <span class="string">'失败'</span></div><div class="line">                    conn.rollback()</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;python-对微博评论进行爬取&quot;&gt;&lt;a href=&quot;#python-对微博评论进行爬取&quot; class=&quot;headerlink&quot; title=&quot;python 对微博评论进行爬取&quot;&gt;&lt;/a&gt;python 对微博评论进行爬取&lt;/h2&gt;&lt;h2 id=&quot;微博授权&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="pyhton" scheme="http://yoursite.com/tags/pyhton/"/>
    
  </entry>
  
  <entry>
    <title>wordcloud云词基本使用</title>
    <link href="http://yoursite.com/2017/11/12/wordcloud/"/>
    <id>http://yoursite.com/2017/11/12/wordcloud/</id>
    <published>2017-11-12T06:41:01.000Z</published>
    <updated>2017-11-21T09:33:26.973Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文本挖掘-wordcloud、主题模型与文本分类"><a href="#文本挖掘-wordcloud、主题模型与文本分类" class="headerlink" title="文本挖掘-wordcloud、主题模型与文本分类"></a>文本挖掘-wordcloud、主题模型与文本分类</h2><p>分词、取词是关键和基础。图片毕竟只是一个可视化的展示手段，内容更重要。分词前要想清楚是否屏蔽某些词性（jieba提供这种功能，但是学习的还不透彻，以后可以专门记录一些分词的东西），分词以后也可以手动删除一些词语，使重点突出。</p><p>遮罩图片的选择很重要。首先需要是大面积白底，否则会整张图片铺满词语。其次，图片的颜色要丰富，最好能有渐变度，这样的配色会很舒服。但是符合条件的图片实在是太难找了…可遇而不可求。</p><p>最后，完美的图片需要很多次地微调参数。词语的数量，字体的大小等，都会对整张图片的效果和词云形状的拟合度产生影响。</p><p>这些只是对现有工具的简单学习应用，并没有什么创新与创造。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install wordcloud</div></pre></td></tr></table></figure><h2 id="使用示例："><a href="#使用示例：" class="headerlink" title="使用示例："></a>使用示例：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8  </span></div><div class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path  </div><div class="line"><span class="keyword">from</span> scipy.misc <span class="keyword">import</span> imread  <span class="comment">#(scipy是基于numpy提供更强大的科学计算库)</span></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt  <span class="comment">#（绘图库）</span></div><div class="line"><span class="keyword">import</span> jieba <span class="comment">#（分词库）</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, STOPWORDS, ImageColorGenerator  <span class="comment">#STOPWORDS停词，去掉一些无意义的词比如（我，你，是等语气词）</span></div><div class="line"></div><div class="line">stopwords = &#123;&#125;  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">importStopword</span><span class="params">(filename=<span class="string">''</span>)</span>:</span>  </div><div class="line">    <span class="keyword">global</span> stopwords  </div><div class="line">    f = open(filename, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)  <span class="comment">#（）</span></div><div class="line">    line = f.readline().rstrip()  </div><div class="line"></div><div class="line">    <span class="keyword">while</span> line:  </div><div class="line">        stopwords.setdefault(line, <span class="number">0</span>)  </div><div class="line">        stopwords[line] = <span class="number">1</span>  </div><div class="line">        line = f.readline().rstrip()  </div><div class="line"></div><div class="line">    f.close()  </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">processChinese</span><span class="params">(text)</span>:</span>  </div><div class="line">    seg_generator = jieba.cut(text)  <span class="comment"># 使用结巴分词，也可以不使用  </span></div><div class="line"></div><div class="line">    seg_list = [i <span class="keyword">for</span> i <span class="keyword">in</span> seg_generator <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> stopwords]  </div><div class="line"></div><div class="line">    seg_list = [i <span class="keyword">for</span> i <span class="keyword">in</span> seg_list <span class="keyword">if</span> i != <span class="string">u' '</span>]  </div><div class="line"></div><div class="line">    seg_list = <span class="string">r' '</span>.join(seg_list)  </div><div class="line"></div><div class="line">    <span class="keyword">return</span> seg_list  </div><div class="line"></div><div class="line">importStopword(filename=<span class="string">'./stopwords.txt'</span>)  </div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 获取当前文件路径  </span></div><div class="line"><span class="comment"># __file__ 为当前文件, 在ide中运行此行会报错,可改为  </span></div><div class="line"><span class="comment"># d = path.dirname('.')  </span></div><div class="line">d = path.dirname(__file__)  </div><div class="line"></div><div class="line"></div><div class="line">text = open(path.join(d, <span class="string">'love.txt'</span>),encoding =<span class="string">'utf-8'</span>).read()  </div><div class="line"></div><div class="line"><span class="comment">#如果是中文  </span></div><div class="line"><span class="comment">#text = processChinese(text)#中文不好分词，使用Jieba分词进行  </span></div><div class="line"></div><div class="line"><span class="comment"># read the mask / color image  </span></div><div class="line"><span class="comment"># taken from http://jirkavinse.deviantart.com/art/quot-Real-Life-quot-Alice-282261010  </span></div><div class="line"><span class="comment"># 设置背景图片  </span></div><div class="line">back_coloring = imread(path.join(d, <span class="string">"./image/love.jpg"</span>))  </div><div class="line"></div><div class="line">wc = WordCloud( font_path=<span class="string">'./font/cabin-sketch.bold.ttf'</span>,<span class="comment">#设置字体  </span></div><div class="line">                background_color=<span class="string">"black"</span>, <span class="comment">#背景颜色  </span></div><div class="line">                max_words=<span class="number">2000</span>,<span class="comment"># 词云显示的最大词数  </span></div><div class="line">                mask=back_coloring,<span class="comment">#设置背景图片  </span></div><div class="line">                max_font_size=<span class="number">100</span>, <span class="comment">#字体最大值  </span></div><div class="line">                random_state=<span class="number">42</span>,  </div><div class="line">                )  </div><div class="line"><span class="comment"># 生成词云, 可以用generate输入全部文本(中文不好分词),也可以我们计算好词频后使用generate_from_frequencies函数  </span></div><div class="line">wc.generate(text)  </div><div class="line"><span class="comment"># wc.generate_from_frequencies(txt_freq)  </span></div><div class="line"><span class="comment"># txt_freq例子为[('词a', 100),('词b', 90),('词c', 80)]  </span></div><div class="line"><span class="comment"># 从背景图片生成颜色值  </span></div><div class="line">image_colors = ImageColorGenerator(back_coloring)  </div><div class="line"></div><div class="line">plt.figure()  </div><div class="line"><span class="comment"># 以下代码显示图片  </span></div><div class="line">plt.imshow(wc)  </div><div class="line">plt.axis(<span class="string">"off"</span>)  </div><div class="line">plt.show()  </div><div class="line"><span class="comment"># 绘制词云  </span></div><div class="line"></div><div class="line"><span class="comment"># 保存图片  </span></div><div class="line">wc.to_file(path.join(d, <span class="string">"名称.png"</span>))</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;文本挖掘-wordcloud、主题模型与文本分类&quot;&gt;&lt;a href=&quot;#文本挖掘-wordcloud、主题模型与文本分类&quot; class=&quot;headerlink&quot; title=&quot;文本挖掘-wordcloud、主题模型与文本分类&quot;&gt;&lt;/a&gt;文本挖掘-wordcloud
      
    
    </summary>
    
      <category term="库" scheme="http://yoursite.com/categories/%E5%BA%93/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>jieba分词</title>
    <link href="http://yoursite.com/2017/11/12/jieba/"/>
    <id>http://yoursite.com/2017/11/12/jieba/</id>
    <published>2017-11-12T05:59:35.000Z</published>
    <updated>2017-11-12T06:17:11.492Z</updated>
    
    <content type="html"><![CDATA[<h3 id="jieba分词基本用法"><a href="#jieba分词基本用法" class="headerlink" title="jieba分词基本用法"></a>jieba分词基本用法</h3><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>支持三种分词模式：<ul><li>精确模式，试图将句子最精确地切开，适合文本分析；</li><li>全模式，把句子中所有的可以成词的词语都扫描出来, 速度非常快，但是不能解决歧义；</li><li>搜索引擎模式，在精确模式的基础上，对长词再次切分，提高召回率，适合用于搜索引擎分词。</li></ul></li><li>支持繁体分词</li><li>支持自定义词典<h2 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h2>*　jieba.cut 方法接受三个输入参数: 需要分词的字符串；cut_all 参数用来控制是否采用全模式；HMM 参数用来控制是否使用 HMM 模型</li><li>jieba.cut_for_search 方法接受两个参数：需要分词的字符串；是否使用 HMM 模型。该方法适合用于搜索引擎构建倒排索引的分词，粒度比较细</li><li>待分词的字符串可以是 unicode 或 UTF-8 字符串、GBK 字符串。注意：不建议直接输入 GBK 字符串，可能无法预料地错误解码成 UTF-8</li><li>jieba.cut 以及 jieba.cut_for_search 返回的结构都是一个可迭代的 generator，可以使用 for 循环来获得分词后得到的每一个词语(unicode)，或者用jieba.lcut 以及 jieba.lcut_for_search 直接返回 list</li><li>jieba.Tokenizer(dictionary=DEFAULT_DICT) 新建自定义分词器，可用于同时使用不同词典。jieba.dt 为默认分词器，所有全局分词相关函数都是该分词器的映射。<br><br>示例：<br></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> jieba</div><div class="line">seg_list = jieba.cut(<span class="string">"我来到北京清华大学"</span>, cut_all=<span class="keyword">True</span>)</div><div class="line">print(<span class="string">"Full Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># 全模式</span></div><div class="line"></div><div class="line">seg_list = jieba.cut(<span class="string">"我来到北京清华大学"</span>, cut_all=<span class="keyword">False</span>)</div><div class="line">print(<span class="string">"Default Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># 精确模式</span></div><div class="line"></div><div class="line">seg_list = jieba.cut(<span class="string">"他来到了网易杭研大厦"</span>)  <span class="comment"># 默认是精确模式</span></div><div class="line">print(<span class="string">", "</span>.join(seg_list))</div><div class="line"></div><div class="line">seg_list = jieba.cut_for_search(<span class="string">"小明硕士毕业于中国科学院计算所，后在日本京都大学深造"</span>)  <span class="comment"># 搜索引擎模式</span></div><div class="line">print(<span class="string">", "</span>.join(seg_list))</div></pre></td></tr></table></figure><p>输出:<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">【全模式】: 我/ 来到/ 北京/ 清华/ 清华大学/ 华大/ 大学</div><div class="line"></div><div class="line">【精确模式】: 我/ 来到/ 北京/ 清华大学</div><div class="line"></div><div class="line">【新词识别】：他, 来到, 了, 网易, 杭研, 大厦    (此处，“杭研”并没有在词典中，但是也被Viterbi算法识别出来了)</div><div class="line"></div><div class="line">【搜索引擎模式】： 小明, 硕士, 毕业, 于, 中国, 科学, 学院, 科学院, 中国科学院, 计算, 计算所, 后, 在, 日本, 京都, 大学, 日本京都大学, 深造</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;jieba分词基本用法&quot;&gt;&lt;a href=&quot;#jieba分词基本用法&quot; class=&quot;headerlink&quot; title=&quot;jieba分词基本用法&quot;&gt;&lt;/a&gt;jieba分词基本用法&lt;/h3&gt;&lt;h2 id=&quot;特点&quot;&gt;&lt;a href=&quot;#特点&quot; class=&quot;head
      
    
    </summary>
    
      <category term="python,库" scheme="http://yoursite.com/categories/python-%E5%BA%93/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>mysql基本操作</title>
    <link href="http://yoursite.com/2017/11/10/mysql/"/>
    <id>http://yoursite.com/2017/11/10/mysql/</id>
    <published>2017-11-10T09:16:37.000Z</published>
    <updated>2017-11-10T15:51:54.263Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mysql基本操作"><a href="#mysql基本操作" class="headerlink" title="mysql基本操作"></a>mysql基本操作</h1><h2 id="对用户授权的操作"><a href="#对用户授权的操作" class="headerlink" title="对用户授权的操作"></a>对用户授权的操作</h2><p><strong>grant  权限  on  数据库名.表名 to 用户名@’可以访问的地址’ identified by “密码”</strong><br><br><strong>权限：  all  所有权限    usage 无权限   select,update,insert,delete，等权限</strong><br><br>数据库.表名： &emsp; *.* &emsp; 所有数据库的所有表<br><br>&emsp;&emsp; &emsp;&emsp;&emsp;&emsp; 数据库名.* &emsp;单个数据库的所有表<br><br>&emsp;&emsp; &emsp;&emsp;&emsp;&emsp;数据库名.表名 &emsp; 单个数据库的某个表<br><br>用户名： 授权的用户名<br><br>可以访问的地址：% 所有地址，但是localhost不能访问<br><br> &emsp;&emsp;&emsp;&emsp;localhost&emsp;  只有localhost可以访问<br>&emsp;&emsp;&emsp;&emsp;                             192.168.1.0/24&emsp; 可以访问网段地址<br><br>&emsp;&emsp;&emsp;&emsp;        192.168.1.1 &emsp;只能某个地址访问<br><br><br><br>flush privileges;  刷新授权</p><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul><li><p>给bigdata用户授予在localhost登录，对mysql数据库进行create,select,update,insert,delete操作，但是不设置密码就可以登陆</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; grant create,select,update,insert,delete on mysql.* to bigdata@&apos;localhost&apos;;</div><div class="line">mysql&gt; flush privileges;</div></pre></td></tr></table></figure><ul><li>登录数据库查看权限：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;show grants;</div></pre></td></tr></table></figure></li></ul></li><li><p>给bigdata用户授予从192.168.0.7的机器登陆，并有bigdatas数据库相应的权限</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; grant create,select,insert,update on bigdata.* to bigdata@&apos;192.168.0.7&apos; identified by &quot;bigdata&quot;;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line">mysql&gt; flush privileges;</div></pre></td></tr></table></figure><ul><li>客户端登录<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -h192.168.0.7 -uzhaoyun -pzhaoyun;</div></pre></td></tr></table></figure></li></ul></li><li><p>给用户授予可以把自己权限再授给其他人的权限</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; grant create on bigdta1 to zhaoyun@&apos;192.168.0.7&apos; identified by &quot;bigdta&quot; with grant option ;</div></pre></td></tr></table></figure></li><li><p>撤销权限</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; revoke create on bigdata.* from bigdata@&apos;192.168.0.7&apos; ;</div></pre></td></tr></table></figure></li></ul><h2 id="清空数据表"><a href="#清空数据表" class="headerlink" title="清空数据表"></a>清空数据表</h2><h3 id="清空数据表使id从1开始"><a href="#清空数据表使id从1开始" class="headerlink" title="清空数据表使id从1开始"></a>清空数据表使id从1开始</h3><p>truncate table 表名;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;mysql基本操作&quot;&gt;&lt;a href=&quot;#mysql基本操作&quot; class=&quot;headerlink&quot; title=&quot;mysql基本操作&quot;&gt;&lt;/a&gt;mysql基本操作&lt;/h1&gt;&lt;h2 id=&quot;对用户授权的操作&quot;&gt;&lt;a href=&quot;#对用户授权的操作&quot; class=&quot;
      
    
    </summary>
    
      <category term="基础" scheme="http://yoursite.com/categories/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Linux防火墙</title>
    <link href="http://yoursite.com/2017/11/06/Linx-fireworld/"/>
    <id>http://yoursite.com/2017/11/06/Linx-fireworld/</id>
    <published>2017-11-06T07:30:17.000Z</published>
    <updated>2017-11-06T12:57:29.688Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux各系统防火墙设置"><a href="#Linux各系统防火墙设置" class="headerlink" title="Linux各系统防火墙设置"></a>Linux各系统防火墙设置</h1><h2 id="Centos-Redhat"><a href="#Centos-Redhat" class="headerlink" title="Centos,Redhat"></a>Centos,Redhat</h2><h3 id="Cnetos6-Redhat6"><a href="#Cnetos6-Redhat6" class="headerlink" title="Cnetos6,Redhat6"></a>Cnetos6,Redhat6</h3><ul><li><p>查看防火墙状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[linuxidc@localhost ~]$service iptable status</div></pre></td></tr></table></figure></li><li><p>关闭防火墙(临时关闭)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">servcie iptables stop</div></pre></td></tr></table></figure></li><li><p>永久关闭防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chkconfig iptables off</div></pre></td></tr></table></figure></li><li><p>开启防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">servcie iptables start</div></pre></td></tr></table></figure></li><li><p>防火墙特定端口打开关闭</p><ul><li><p>方法一：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT</div><div class="line">/etc/init.d/iptables save</div><div class="line">service iptables restart</div></pre></td></tr></table></figure></li><li><p>方法二<br><br> vi /etc/sysconfig/iptables  打开配置文件加入如下语句:<br><br>-A INPUT -p tcp -m state –state NEW -m tcp –dport 80 -j ACCEPT   重启防火墙，修改完成。</p></li></ul></li><li><p>关闭特定端口：</p><ul><li>方法一：<br><br>/sbin/iptables -I INPUT -p tcp –dport 80 -j DROP   <br><br>/etc/init.d/iptables save   保存修改<br><br>service iptables restart    重启防火墙，修改生效</li><li><p>方法二：<br><br> vi /etc/sysconfig/iptables  打开配置文件加入如下语句:<br></p><p> -A INPUT -p tcp -m state –state NEW -m tcp –dport 80 -j DROP   重启防火墙，修改完成</p></li></ul></li><li>查看端口状况：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/iptables status</div></pre></td></tr></table></figure></li></ul><h3 id="Cnetos7-Redhat7"><a href="#Cnetos7-Redhat7" class="headerlink" title="Cnetos7,Redhat7"></a>Cnetos7,Redhat7</h3><ul><li><p>启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl start firewalld</div></pre></td></tr></table></figure></li><li><p>停止</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl disable firewalld</div></pre></td></tr></table></figure></li><li><p>禁用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl stop firewalld</div></pre></td></tr></table></figure></li><li><p>状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl status firewalld</div></pre></td></tr></table></figure></li><li><p>开启端口 <br><br>firewall-cmd –zone=public –add-port=80/tcp –permanent    （–permanent永久生效，没有此参数重启后失效）</p></li><li><p>重新载入<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">firewall-cmd --reload</div></pre></td></tr></table></figure></li><li><p>查看</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">firewall-cmd --zone= public --query-port=80/tcp</div></pre></td></tr></table></figure></li><li><p>删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">firewall-cmd --zone= public --remove-port=80/tcp --permanent</div></pre></td></tr></table></figure></li><li><p>systemctl是CentOS7的服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体。<br><br>启动一个服务：systemctl start firewalld.service<br><br>关闭一个服务：systemctl stop firewalld.service<br><br>重启一个服务：systemctl restart firewalld.service<br><br>显示一个服务的状态：systemctl status firewalld.service<br><br>在开机时启用一个服务：systemctl enable firewalld.service<br><br>在开机时禁用一个服务：systemctl disable firewalld.service<br><br>查看服务是否开机启动：systemctl is-enabled firewalld.service<br><br>查看已启动的服务列表：systemctl list-unit-files|grep enabled<br><br>查看启动失败的服务列表：systemctl –failed<br></p></li><li><p>配置firewalld-cmd<br><br>查看版本： firewall-cmd –version<br><br>查看帮助： firewall-cmd –help<br><br>显示状态： firewall-cmd –state<br><br>查看所有打开的端口： firewall-cmd –zone=public –list-ports<br><br>更新防火墙规则： firewall-cmd –reload<br><br>查看区域信息:  firewall-cmd –get-active-zones<br><br>查看指定接口所属区域： firewall-cmd –get-zone-of-interface=eth0<br><br>拒绝所有包：firewall-cmd –panic-on<br><br>取消拒绝状态： firewall-cmd –panic-off<br><br>查看是否拒绝： firewall-cmd –query-panic<br><br>##SUSE</p></li><li>SUSE防火墙查看命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">linux:~ # chkconfig -list|grep -i fire</div><div class="line">SuSEfirewall2_init        0:off 1:off 2:off 3:off 4:off 5:off 6:off</div><div class="line">SuSEfirewall2_setup       0:off 1:off 2:off 3:off 4:off 5:off 6:off</div></pre></td></tr></table></figure></li></ul><p>SUSE防火墙立即停止命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">linux:~ # SuSEfirewall2 stop</div><div class="line">SuSEfirewall2: Warning: ip6tables does not support state matching. Extended IPv6 support disabled.</div><div class="line">SuSEfirewall2: batch committing...</div><div class="line">SuSEfirewall2: Firewall rules unloaded.</div></pre></td></tr></table></figure></p><p>SUSE默认的防火墙设置为禁止所有外来联结。如果你想开放某个端口的话，就得修改防火墙设置开放这个端口。本文介绍了怎么修改SUSE的防火墙设置以开放某指定端口。<br>手动修改：</p><p>#vi /etc/sysconfig/SUSEfirewall2</p><p>#TCP端口的情况：<br>FW_SERVICES_EXT_TCP = “6000”</p><p>#UDP端口的情况：<br>FW_SERVICES_EXT_UDP = “177”<br>防火墙设置的生效：</p><p>#rcSUSEfirewall2 restart</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux各系统防火墙设置&quot;&gt;&lt;a href=&quot;#Linux各系统防火墙设置&quot; class=&quot;headerlink&quot; title=&quot;Linux各系统防火墙设置&quot;&gt;&lt;/a&gt;Linux各系统防火墙设置&lt;/h1&gt;&lt;h2 id=&quot;Centos-Redhat&quot;&gt;&lt;a hre
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux firewalld" scheme="http://yoursite.com/tags/Linux-firewalld/"/>
    
  </entry>
  
  <entry>
    <title>Markdown</title>
    <link href="http://yoursite.com/2017/11/05/Markdown/"/>
    <id>http://yoursite.com/2017/11/05/Markdown/</id>
    <published>2017-11-05T04:41:52.000Z</published>
    <updated>2017-11-06T07:33:21.473Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2017/11/05/Markdown/markdown.jpg" alt=""></p><p>&emsp;&emsp;<strong>Markdown</strong> 是一种文本格式。你可以用它来控制文档的显示。使用 markdown，你可以创建粗体的文字，斜体的文字，添加图片，并且创建列表 等等。基本上来讲，Markdown 就是普通的文字加上 # 或者 * 等符号。</p><p> <strong><a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/markdown-basics?id=%e4%bb%80%e4%b9%88%e6%98%af-markdown" target="_blank" rel="external">markdown</a></strong></p><h1 id="Markdown语法"><a href="#Markdown语法" class="headerlink" title="Markdown语法"></a>Markdown语法</h1><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 这是 \&lt;h1&gt; 一级标题</div><div class="line">## 这是 \&lt;h2&gt; 二级标题</div><div class="line">### 这是 \&lt;h3&gt; 三级标题</div><div class="line">#### 这是 \&lt;h4&gt; 四级标题</div><div class="line">##### 这是 \&lt;h5&gt; 五级标题</div><div class="line">###### 这是 \&lt;h6&gt; 六级标题</div></pre></td></tr></table></figure><h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><p><em>这会是 斜体 的文字</em><br><em>这会是 斜体 的文字</em></p><p><strong>这会是 粗体 的文字</strong><br><strong>这会是 粗体 的文字</strong></p><p><em>你也 **组合** 这些符号</em></p><p><del>这个文字将会被横线删除</del><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">*这会是 斜体 的文字*</div><div class="line">_这会是 斜体 的文字_</div><div class="line"></div><div class="line">**这会是 粗体 的文字**</div><div class="line">__这会是 粗体 的文字__</div><div class="line"></div><div class="line">_你也 \*\*组合** 这些符号_</div><div class="line"></div><div class="line">~~这个文字将会被横线删除~~</div></pre></td></tr></table></figure></p><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><ul><li>Item 1</li><li>Item 2<ul><li>Item 2a</li><li>Item 2b<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">* Item 1</div><div class="line">* Item 2</div><div class="line">  * Item 2a</div><div class="line">  * Item 2b</div></pre></td></tr></table></figure></li></ul></li></ul><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><ol><li>Item 1</li><li>Item 2</li><li>Item 3<ol><li>Item 3a</li><li>Item 3b<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1. Item 1</div><div class="line">1. Item 2</div><div class="line">1. Item 3</div><div class="line">   1. Item 3a</div><div class="line">   1. Item 3b</div><div class="line">## 添加图片</div><div class="line">![GitHub Logo](/images/logo.png)</div><div class="line">Format: ![Alt Text](url)</div></pre></td></tr></table></figure></li></ol></li></ol><p><img src="/images/logo.png" alt="GitHub Logo"><br>Format: <img src="/2017/11/05/Markdown/url" alt="Alt Text"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">## 链接</div><div class="line">http://github.com - 自动生成！</div><div class="line">[GitHub](http://github.com)</div></pre></td></tr></table></figure></p><p><a href="http://github.com" target="_blank" rel="external">http://github.com</a> - 自动生成！<br><a href="http://github.com" target="_blank" rel="external">GitHub</a></p><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>正如 Kanye West 所说：</p><blockquote><p>We’re living the future so<br>the present is our past.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">正如 Kanye West 所说：</div><div class="line">&gt; We&apos;re living the future so</div><div class="line">&gt; the present is our past.</div></pre></td></tr></table></figure></p></blockquote><h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>如下，三个或者更多的</p><hr><p>连字符</p><hr><p>星号</p><hr><p>下划线<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">---</div><div class="line"></div><div class="line">连字符</div><div class="line"></div><div class="line">***</div><div class="line"></div><div class="line">星号</div><div class="line"></div><div class="line">___</div><div class="line"></div><div class="line">下划线</div></pre></td></tr></table></figure></p><h2 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h2><p>我觉得你应该在这里使用<br><code>&lt;addr&gt;</code> 才对。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">我觉得你应该在这里使用</div><div class="line">`&lt;addr&gt;` 才对。</div></pre></td></tr></table></figure></p><h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>你可以在你的代码上面和下面添加 <figure class="highlight plain"><figcaption><span>来表示代码块。</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line">你可以在你的代码上面和下面添加 ``` 来表示代码块。</div></pre></td></tr></table></figure></p><h2 id="语法高亮"><a href="#语法高亮" class="headerlink" title="语法高亮"></a>语法高亮</h2><p>你可以给你的代码块添加任何一种语言的语法高亮</p><p>例如，给 ruby 代码添加语法高亮：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'redcarpet'</span></div><div class="line">markdown = Redcarpet.new(<span class="string">"Hello World!"</span>)</div><div class="line">puts markdown.to_html</div></pre></td></tr></table></figure><p>markdown表示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">```ruby</div><div class="line">require &apos;redcarpet&apos;</div><div class="line">markdown = Redcarpet.new(&quot;Hello World!&quot;)</div><div class="line">puts markdown.to_html</div></pre></td></tr></table></figure></p><h2 id="代码块-class（MPE-扩展的特性）"><a href="#代码块-class（MPE-扩展的特性）" class="headerlink" title="代码块 class（MPE 扩展的特性）"></a>代码块 class（MPE 扩展的特性）</h2><p>你可以给你的代码块设置 class。</p><p>例如，添加 class1 class2 到一个 代码块：</p><figure class="highlight javascript"><figcaption><span>&#123;.class1 .class&#125;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>markdownb表示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">你可以给你的代码块设置 class。</div><div class="line"></div><div class="line">例如，添加 class1 class2 到一个 代码块：</div><div class="line"></div><div class="line">```javascript &#123;.class1 .class&#125;</div><div class="line">function add(x, y) &#123;</div><div class="line">  return x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h2 id="代码行数"><a href="#代码行数" class="headerlink" title="代码行数"></a>代码行数</h2><p>如果你想要你的代码块显示代码行数，只要添加 line-numbers class 就可以了。</p><p>例如：</p><figure class="highlight javascript"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>markdown表示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">```javascript &#123;.line-numbers&#125;</div><div class="line">function add(x, y) &#123;</div><div class="line">  return x + y</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2017/11/05/Markdown/markdown.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;strong&gt;Markdown&lt;/strong&gt; 是一种文本格式。你可以用它来控制文档的显示。使用 markdown，你可以创建
      
    
    </summary>
    
      <category term="markdown" scheme="http://yoursite.com/categories/markdown/"/>
    
    
      <category term="markdown hexo" scheme="http://yoursite.com/tags/markdown-hexo/"/>
    
  </entry>
  
</feed>
